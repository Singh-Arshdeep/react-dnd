(this["webpackJsonpdrag-n-drop"]=this["webpackJsonpdrag-n-drop"]||[]).push([[0],{116:function(e,t,a){e.exports=a(165)},121:function(e,t,a){},122:function(e,t,a){},123:function(e,t,a){},164:function(e,t,a){},165:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(12),l=a.n(s),i=(a(121),a(17)),c=a(7),o=a(21),d={tasks:{},columns:{"column-1":{id:"column-1",title:"New Tasks",taskIds:[]},"column-2":{id:"column-2",title:"In Progress",taskIds:[]},"column-3":{id:"column-3",title:"Completed",taskIds:[]}},columnOrder:["column-1","column-2","column-3"]},u=(a(122),a(43)),m=(a(123),a(216)),p=a(197),f=a(200),b=a(202),g=a(100),h=a.n(g),k=Object(p.a)((function(e){return{root:{display:"flex","& > *":{margin:e.spacing(1)}},avatar:{color:e.palette.getContrastText(f.a[500]),backgroundColor:"#F76C6C",width:e.spacing(4),height:e.spacing(4),marginLeft:5}}}));function E(e){var t=k();return r.a.createElement(u.b,{draggableId:e.task.id,index:e.index},(function(a,n){return r.a.createElement("div",null,r.a.createElement("div",Object.assign({className:"item"},a.draggableProps,a.dragHandleProps,{ref:a.innerRef,onClick:function(){e.handleEditTask(e.task,e.columnId)}}),r.a.createElement(m.a,{className:t.avatar},e.task.assignedTo),r.a.createElement("div",{className:"taskName"},r.a.createElement("div",null,r.a.createElement("span",null,e.task.taskName)),r.a.createElement("div",null,r.a.createElement("span",{style:{fontSize:"0.7em"}},e.task.dueDate?r.a.createElement("span",null,"Due:"):"",e.task.dueDate.toString()))),r.a.createElement(b.a,{"aria-label":"More info",color:"secondary"},r.a.createElement(h.a,null))))}))}var v=a(101),j=a.n(v);function O(e){return r.a.createElement("div",null,r.a.createElement("div",{className:"colDiv"},r.a.createElement("p",{className:"colTitle"},e.column.title,"New Tasks"==e.column.title?r.a.createElement("span",{onClick:e.handleAddNewTask,style:{cursor:"pointer"}},r.a.createElement(b.a,{"aria-label":"Add",style:{padding:0,position:"absolute",marginLeft:5}},r.a.createElement(j.a,null))):r.a.createElement("span",null)),r.a.createElement(u.c,{droppableId:e.column.id,direction:"vertical"},(function(t,a){return r.a.createElement("div",Object.assign({className:"taskList",ref:t.innerRef},t.droppableProps),e.tasks.map((function(t,a){return r.a.createElement(E,{key:t.id,task:t,handleEditTask:e.handleEditTask,index:a,columnId:e.column.id})})),t.placeholder)}))))}var y=a(212),T=a(203),D=a(166),w=Object(p.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],borderRadius:5,padding:50}}}));function N(e){var t=w();return r.a.createElement("div",null,r.a.createElement(y.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:e.modalStateOpen,onClose:e.handleModalClose,closeAfterTransition:!0,BackdropComponent:T.a,BackdropProps:{timeout:500}},r.a.createElement(D.a,{in:e.modalStateOpen},r.a.createElement("div",{className:t.paper},e.children))))}var S=a(213),x=a(211),I=a(215),C=a(167),A=a(66),M=a(13),P=a(210),B=a(207),L=Object(p.a)((function(e){return{textField:{paddingBottom:20}}}));function _(e){var t=new Date;t.setDate(t.getDate()+1);var a=L(),s=Object(n.useState)({taskName:"",taskDetails:"",assignedTo:"",dueDate:t.toLocaleDateString("en-US")}),l=Object(o.a)(s,2),d=l[0],u=l[1],m=Object(n.useState)([]),p=Object(o.a)(m,2),f=p[0],b=p[1];Object(n.useEffect)((function(){fetch("https://server.taskiton.wmdd.ca/userlist",{method:"GET",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}).then((function(e){return e.status>=400&&alert("Error - refresh page and try again"),e.json()})).then((function(e){b(e)})).catch((function(e){alert("Error - refresh page and try again"),console.log(e)}))}),[]);var g=function(e){var t="",a="";"undefined"!==typeof e.target?(t=e.target.name,a=e.target.value):(t="dueDate",a=e.toLocaleDateString("en-US")),u((function(e){return Object(c.a)(Object(c.a)({},e),{},Object(i.a)({},t,a))}))};return r.a.createElement("form",{onSubmit:function(t){e.handleAddNewTaskSubmit(d,t)}},r.a.createElement("div",null,r.a.createElement(S.a,{id:"standard-secondary",label:"Task Name",color:"primary",value:d.taskName,onChange:g,className:a.textField,name:"taskName",required:!0})),r.a.createElement("div",null,r.a.createElement(C.a,{"aria-label":"minimum height",rowsMin:3,placeholder:"Enter Task Details",value:d.taskDetails,onChange:g,className:a.textField,name:"taskDetails"})),r.a.createElement("div",null,r.a.createElement(I.a,{id:"demo-simple-select-label",style:{paddingTop:"8%",paddingBottom:"3%"}},"Assign To"),r.a.createElement(x.a,{native:!0,labelId:"demo-simple-select-label",id:"demo-simple-select",value:d.assignedTo,onChange:g,name:"assignedTo",required:!0},r.a.createElement("option",{value:"",hidden:!0},"Select a user"),f.map((function(e){return r.a.createElement("option",{key:e.user_id,value:e.name},e.name.split(" ")[0])})))),r.a.createElement("div",null,r.a.createElement(I.a,{id:"demo-simple-select-label",style:{paddingTop:"10%",paddingBottom:"3%"}},"Due Date:"),r.a.createElement(M.a,{utils:A.a},r.a.createElement(P.a,{value:d.dueDate,onChange:g,name:"dueDate",disablePast:!0}))),r.a.createElement("br",null),r.a.createElement("div",{style:{width:"100%",textAlign:"center"}},r.a.createElement(B.a,{type:"submit",variant:"contained",color:"primary"},"Save"),r.a.createElement(B.a,{variant:"contained",style:{marginLeft:"5%"},onClick:e.closeModal},"Cancel")))}var F=Object(p.a)((function(e){return{textField:{paddingBottom:20,width:"15vw"},paper:{margin:"100px"}}}));function J(e){var t=F(),a=Object(n.useState)({taskName:e.task.taskName,taskDetails:e.task.details,assignedTo:e.task.assignedTo,dueDate:e.task.dueDate}),s=Object(o.a)(a,2),l=s[0],d=s[1],u=function(e){var t="",a="";"undefined"!==typeof e.target?(t=e.target.name,a=e.target.value):(t="dueDate",a=e.toLocaleDateString("en-US")),d((function(e){return Object(c.a)(Object(c.a)({},e),{},Object(i.a)({},t,a))}))},m=Object(n.useState)([]),p=Object(o.a)(m,2),f=p[0],b=p[1];return Object(n.useEffect)((function(){fetch("https://server.taskiton.wmdd.ca/userlist",{method:"GET",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}).then((function(e){return e.status>=400&&alert("Error - refresh page and try again"),e.json()})).then((function(e){b(e)})).catch((function(e){alert("Error - refresh page and try again"),console.log(e)}))}),[]),r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(t){e.handleEditTaskSubmit(l,t,e.task.id)}},r.a.createElement("div",null,r.a.createElement(S.a,{id:"standard-secondary",label:"Task Name",color:"primary",value:l.taskName,onChange:u,className:t.textField,name:"taskName"})),r.a.createElement("div",null,r.a.createElement(C.a,{"aria-label":"minimum height",rowsMin:3,placeholder:"Enter Details",value:l.taskDetails,onChange:u,className:t.textField,name:"taskDetails"})),r.a.createElement("div",null,r.a.createElement(I.a,{id:"demo-simple-select-label",style:{paddingTop:"8%",paddingBottom:"3%"}},"Assign To"),r.a.createElement(x.a,{native:!0,labelId:"demo-simple-select-label",id:"demo-simple-select",value:l.assignedTo,onChange:u,name:"assignedTo",required:!0},r.a.createElement("option",{value:"",hidden:!0},"Select a user"),f.map((function(e){return r.a.createElement("option",{key:e.user_id,value:e.name.split(" ")[0][0]+e.name.split(" ")[1][0]},e.name.split(" ")[0])})))),r.a.createElement("div",null,r.a.createElement(I.a,{id:"demo-simple-select-label",style:{paddingTop:"10%",paddingBottom:"3%"}},"Due Date:"),r.a.createElement(M.a,{utils:A.a},r.a.createElement(P.a,{value:l.dueDate,onChange:u,name:"dueDate",disablePast:!0}))),r.a.createElement("br",null),r.a.createElement("div",{style:{width:"100%",textAlign:"center"}},r.a.createElement(B.a,{type:"submit",variant:"contained",color:"primary"},"Save"),r.a.createElement(B.a,{variant:"contained",style:{marginLeft:"5%"},onClick:e.closeModal},"Cancel"))),r.a.createElement("br",null),r.a.createElement("div",{style:{width:"100%",textAlign:"center"}},r.a.createElement(B.a,{variant:"contained",color:"secondary",onClick:function(){e.handleEditNewTaskDelete(e.task.id)}},"Delete")))}function R(){var e=Object(n.useState)(null),t=Object(o.a)(e,2),a=t[0],s=t[1];Object(n.useEffect)((function(){R().then((function(e){s(d)}))}),[]);var l=function(e,t){var a={taskId:e,columnId:t.droppableId.split("-")[1]};fetch("https://server.taskiton.wmdd.ca/movetask",{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.status,e.json()})).then((function(e){})).catch((function(e){}))},m=Object(n.useState)(!1),p=Object(o.a)(m,2),f=p[0],b=p[1],g=Object(n.useState)(""),h=Object(o.a)(g,2),k=h[0],E=h[1],v=Object(n.useState)(!0),j=Object(o.a)(v,2),y=j[0],T=j[1],D=function(e,t){var a=Object(c.a)(Object(c.a)({},e),{},{assignedTo:t,columnId:1});fetch("https://server.taskiton.wmdd.ca/tasks",{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.status>=400&&alert("Error - refresh page and try again"),e.json()})).then((function(e){})).catch((function(e){alert("Error - refresh page and try again")}))},w=Object(n.useState)(""),S=Object(o.a)(w,2),x=S[0],I=S[1],C=Object(n.useState)(""),A=Object(o.a)(C,2),M=A[0],P=A[1],B=function(e,t){T(!1),b(!0),I(e),P(t)},L=function(e){fetch("https://server.taskiton.wmdd.ca/updatetask",{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.status>=400&&alert("Error - refresh page and try again"),e.json()})).then((function(e){})).catch((function(e){alert("Error - refresh page and try again")}))},F=function(e){var t={task_id:e};fetch("https://cors-anywhere.herokuapp.com/https://server.taskiton.wmdd.ca/tasks",{method:"DELETE",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.status>=400&&alert("Error - refresh page and try again"),e.json()})).then((function(e){})).catch((function(e){alert("Error - refresh page and try again")}))},R=function(){return new Promise((function(e,t){fetch("https://cors-anywhere.herokuapp.com/https://server.taskiton.wmdd.ca/tasks",{"X-Requested-With":"XMLHttpRequest"}).then((function(e){return e.json()})).then((function(a){Object.keys(a).map((function(e){d.tasks=Object(c.a)(Object(c.a)({},d.tasks),{},Object(i.a)({},e,{id:a[e].task_id,taskName:a[e].task_name,assignedTo:a[e].user_name.split(" ")[0][0]+a[e].user_name.split(" ")[1][0],details:a[e].task_details,dueDate:a[e].due_date}))})),fetch("https://server.taskiton.wmdd.ca/columnmapping").then((function(e){return e.json()})).then((function(a){Object.keys(a).map((function(e){d.columns=Object(c.a)(Object(c.a)({},d.columns),{},Object(i.a)({},e,Object(c.a)(Object(c.a)({},d.columns[e]),{},{taskIds:a[e]})))})),a?e("Promise resolved successfully"):t(Error("Promise rejected"))}))}))}))},q=function(){b(!1)};return a?r.a.createElement("div",null,r.a.createElement(u.a,{onDragEnd:function(e){var t=e.destination,n=e.source,r=e.draggableId;if(t&&(t.droppableId!==n.droppableId||t.index!==n.index))if(n.droppableId===t.droppableId){var o=a.columns[n.droppableId],d=Array.from(o.taskIds);d.splice(n.index,1),d.splice(t.index,0,r);var u=Object(c.a)(Object(c.a)({},o),{},{taskIds:d});s((function(e){return Object(c.a)(Object(c.a)({},e),{},{columns:Object(c.a)(Object(c.a)({},e.columns),{},Object(i.a)({},u.id,u))})}))}else if(null!==t){var m=a.columns[n.droppableId],p=m.taskIds;p.splice(n.index,1);var f=a.columns[t.droppableId],b=f.taskIds;b.splice(t.index,0,r);var g=Object(c.a)(Object(c.a)({},m),{},{taskIds:p}),h=Object(c.a)(Object(c.a)({},f),{},{taskIds:b});s((function(e){var t;return Object(c.a)(Object(c.a)({},e),{},{columns:Object(c.a)(Object(c.a)({},e.columns),{},(t={},Object(i.a)(t,g.id,g),Object(i.a)(t,h.id,h),t))})})),l(r,t)}},onDragStart:function(){}},a.columnOrder.map((function(e){var t=a.columns[e],n=t.taskIds.map((function(e){return a.tasks[e]}));return r.a.createElement(O,{key:t.id,column:t,tasks:n,handleAddNewTask:function(){var e;e=t.id,T(!0),b(!0),E(e)},handleEditTask:B})}))),r.a.createElement(N,{modalStateOpen:f,handleModalClose:function(){b(!1)}},y?r.a.createElement(_,{handleAddNewTaskSubmit:function(e,t){if(t.preventDefault(),e.taskName.length<1)b(!1);else{var n=a.tasks,r=Object.keys(n).length,l="",o=new Date,d=o.getHours(),u=o.getMinutes(),m=o.getSeconds(),p=o.getMilliseconds();l=r>0?"task-"+ ++Array.from(Object.keys(n))[r-1].split("-")[1]+"-"+d+u+m+p:"task-"+d+"-"+d+u+m+p;var f="";e.assignedTo&&(f=e.assignedTo.split(" ")[0].split("")[0]+e.assignedTo.split(" ")[1].split("")[0]);var g={id:l,taskName:e.taskName,details:e.taskDetails,assignedTo:f,dueDate:e.dueDate};n[l]=g;var h=a.columns[k].taskIds;h.splice(h.length,0,l);var E=Object(c.a)(Object(c.a)({},a.columns[k]),{},{taskIds:h});s((function(e){return Object(c.a)(Object(c.a)({},e),{},{tasks:n,columns:Object(c.a)(Object(c.a)({},e.columns),{},Object(i.a)({},k,E))})})),D(g,e.assignedTo),b(!1)}},closeModal:q}):r.a.createElement(J,{task:x,handleEditTaskSubmit:function(e,t,n){t.preventDefault();var r=a.tasks;r[n]={id:n,taskName:e.taskName,details:e.taskDetails,assignedTo:e.assignedTo,dueDate:e.dueDate},s((function(e){return Object(c.a)(Object(c.a)({},e),{},{tasks:r})})),b(!1),L(r[n])},handleEditNewTaskDelete:function(e){var t=a.tasks;delete t[e];var n=a.columns[M].taskIds,r=n.indexOf(e);n.splice(r,1);var l=Object(c.a)(Object(c.a)({},a.columns[M]),{},{taskIds:n});s((function(e){return Object(c.a)(Object(c.a)({},e),{},{tasks:t,columns:Object(c.a)(Object(c.a)({},e.columns),{},Object(i.a)({},M,l))})})),b(!1),F(e)},closeModal:q}))):r.a.createElement("div",null)}var q=a(209),W=a(208),G=a(206),H=a(214),U=(a(164),Object(p.a)((function(e){return{root:{flexGrow:1,height:50},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1,marginTop:-10}}})));function X(){var e=U();return r.a.createElement("div",null,r.a.createElement("div",{className:e.root},r.a.createElement(q.a,{position:"static",style:{height:"120%"}},r.a.createElement(W.a,null,r.a.createElement(G.a,{variant:"h6",className:e.title},"Kanban Task Manager"),r.a.createElement(B.a,{color:"inherit"},r.a.createElement("a",{href:"https://www.taskiton.wmdd.ca/#/signup",target:"_blank",style:{color:"white",textDecoration:"none",fontWeight:"bold",marginTop:"-10"}},"Signup"))))),r.a.createElement(H.a,{label:"Signup to add your name in the list",style:{position:"absolute",marginLeft:"12px",fontWeight:"bold",textAlign:"center",margin:"auto",width:"100%"},color:"secondary"}),r.a.createElement(R,null))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(X,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[116,1,2]]]);
//# sourceMappingURL=main.46fe485e.chunk.js.map